Announcing 2 new scripts for posting review requests to Review Board:

/build/cm/bin/post
/build/cm/bin/rb2

In the near future, we will be upgrading our Review Board servers to version 1.6 or 1.7 (FIXME). The new versions have removed the old Web API that our current rb script uses.  Review Board maintains a script for posting reviews called post-review which is kept in sync with changes to Review Board, and we'd like to take advantage of that.

The new script

/build/cm/bin/post

is a python script which uses post-review as a library to interact with Review Board. It has additional functionality specific to Perforce and our workflow, and can be used to create, edit and submit reviews. It is installed on all of our shared development machines along with post-review.  If you maintain your own unix system with Python 2.5 or greater, you can install post-review and use it or post. One important piece of functionality that post adds over post-review is when you submit your review, it will update the changelist for your review to reflect the actual submitted change list number.

Since we still have a few systems with older Python vesions that we can't upgrade, we have a light version of the old rb script 

/build/cm/bin/rb2 

which can be used to create, edit and submit reviews.  We tried to make the user interface for rb2, post and post-review as similar as possible to make it easier to switch between them. 


IMPORTANT: The most notable change for users of the old rb script, is with post-review, post and rb2 you use the perforce changelist number to interact with your review instead of the Review Board ID number.  I think most people will find this easier and more natural and it's how post-review works.

For usage on any of these scripts, invoke them with no arguments.

I consider these 2 new scripts to be beta, as they've been tested so far by CM only.  Please try the new scripts and report problems to me or bugzilla so I can fix them before we roll out the new Review Board server. For now, the old rb script can be used as a backup, but it will not work after the upgrade.

Here's a link for more information on the post-review script

http://www.reviewboard.org/docs/manual/1.6/users/tools/post-review/#post-review


